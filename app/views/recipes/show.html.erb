<% page_title(@recipe.name) %>
<% page_description(@recipe.description || "Recipe for #{@recipe.name}") %>

<% content_for :facebook_og_metas do %>
	<%= render "facebook_og_metas" %>
<%end%>

<%= render :layout => "shared/page_header" do %>
	<h1><%= @recipe.name %>

		<% if(current_user and current_user.admin?) %>
			<small>(<%= link_to "Edit", edit_admin_recipe_path(@recipe)%>)</small>
		<% end %>
	</h1>
<% end %>

<p>
	<% @recipe.ingredient_tag_list.each do |tag| %>
		<%= link_to tag, tag_path(tag.parameterize), :class => "round label" %>
	<% end %>

	<% @recipe.categories.each do |category| %>
		<%= link_to category.name, category, :class => "round label" %>
	<% end %>
</p>

<div>
	<p>
		<%= @recipe.description %>
		<%= content_tag :span, "Suitable for vegetarians" if @recipe.vegetarian? %>
	</p>
	<% if(@recipe.book) %>
		From the book <%= link_to @recipe.book.title, @recipe.book %>.
	<% end %>
</div>

<% if @recipe.mentions_serves_or_times %>
	<dl>
		<% if(!@recipe.serves.blank?) %>
			<dt>Serves</dt><dl><%= @recipe.serves %></dl>
		<% end %>

		<% if(!@recipe.cooking_time.blank?) %>
			<dt>Cooking Time</dt><dl><%= @recipe.cooking_time %></dl>
		<% end %>

		<% if(!@recipe.preparation_time.blank?) %>
			<dt>Preparation Time</dt><dl><%= @recipe.preparation_time %></dl>
		<% end %>
	</dl>
<% end %> 


<% if @recipe.image.exists? %>
	<%= image_tag @recipe.image.url(:full) %>
<% else %>
	<%= image_tag "no-img.jpg"  %>
<% end %>

<h2>Ingredients</h2>
<ul>
	<% @recipe.html_ingredients.each_line do |ingredient| %>
		<li><%= raw ingredient %></li>
	<% end %>
</ul>

<h2>Method</h2>
<ol>
	<% @recipe.method.each_line do |method| %>
		<li><%= method %></li>
	<% end %> 
</ol>

<%= content_tag :aside, @recipe.footnote if @recipe.footnote %>